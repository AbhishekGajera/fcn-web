{"version":3,"sources":["app/user-pages/Settings.js"],"names":["Settings","history","useHistory","useForm","mode","register","handleSubmit","formState","errors","isDirty","isValid","useCookies","cookie","setCookie","onClickLogoutHandler","formData","JSON","stringify","refreshToken","localStorage","getItem","path","userLogout","finally","push","onSubmit","data","terms","password","updateProfile","user","id","result","toast","success","response","message","error","process","code","strongRegex","RegExp","strongRegexMo","className","src","require","alt","autoComplete","type","placeholder","name","defaultValue","required","email","pattern","dob","contactno","country","selected","registrationType","disabled"],"mappings":"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","file":"static/js/102.d161c15e.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { updateProfile, userLogout } from \"../../utils/APIs\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Settings = () => {\r\n  const history = useHistory();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors, isDirty, isValid },\r\n  } = useForm({\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  const [cookie, setCookie] = useCookies([\"user\"]);\r\n\r\n  const onClickLogoutHandler = async () => {\r\n    const formData = JSON.stringify({\r\n      refreshToken: localStorage.getItem(\"refreshToken\"),\r\n    });\r\n    setCookie(\"user\", null, { path: \"/\" });\r\n    userLogout(formData).finally(() => {\r\n      history.push(\"/user-pages/login-1\");\r\n    });\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    delete data.terms;\r\n\r\n    if(!data.password){\r\n        delete data.password\r\n    }\r\n\r\n    try {\r\n      const result = await updateProfile(data, cookie?.user?.id);\r\n      setCookie('user', result.data , { path: '/' });\r\n      toast.success(\"Profile updated sucssefully\");\r\n    } catch (error) {\r\n        if (error?.response?.data?.message) {\r\n            toast.error(error?.response?.data.message);\r\n        } else {\r\n            toast.error(process.env.REACT_APP_ERROR_MESSAGE);\r\n        }\r\n\r\n        if (error?.response?.data?.code === 401) {\r\n          onClickLogoutHandler();\r\n        }\r\n    }\r\n  };\r\n\r\n  var strongRegex = new RegExp(\"^(?=.*[A-Za-z])(?=.*[0-9])(?=.{8,})\");\r\n  var strongRegexMo = new RegExp(\r\n    \"^\\\\s*(?:\\\\+?(\\\\d{1,3}))?[-. (]*(\\\\d{3})[-. )]*(\\\\d{3})[-. ]*(\\\\d{4})(?: *x(\\\\d+))?\\\\s*$\"\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex align-items-center auth px-0\">\r\n        <div className=\"row w-100 mx-0\">\r\n          <div className=\"col-lg-7 mx-auto\">\r\n            <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\r\n              <div className=\"d-flex align-items-center justify-content-center\">\r\n                <div className=\"nav-profile-img\">\r\n                  <img\r\n                    src={require(\"../../assets/images/faces/face1.jpg\")}\r\n                    alt=\"user\"\r\n                  />\r\n                  <span className=\"availability-status online\"></span>\r\n                </div>\r\n              </div>\r\n              <h4>Change in details?</h4>\r\n              <h6 className=\"font-weight-light\">\r\n                Update your profile is normal, no required to verify again\r\n              </h6>\r\n              <form\r\n                className=\"pt-3\"\r\n                autoComplete=\"new-password\"\r\n                onSubmit={handleSubmit(onSubmit)}\r\n              >\r\n                <div className=\"form-group\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control form-control-lg\"\r\n                    id=\"exampleInputUsername1\"\r\n                    placeholder=\"Username\"\r\n                    name=\"name\"\r\n                    defaultValue={cookie?.user?.name}\r\n                    {...register(\"name\", { required: true })}\r\n                  />\r\n                  {errors && errors.name && <p>name is required field</p>}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control form-control-lg\"\r\n                    id=\"exampleInputEmail1\"\r\n                    placeholder=\"Email\"\r\n                    name=\"email\"\r\n                    defaultValue={cookie?.user?.email}\r\n                    {...register(\"email\", {\r\n                      required: true,\r\n                      pattern: /^\\S+@\\S+$/i,\r\n                    })}\r\n                  />\r\n                  {errors &&\r\n                    errors.email &&\r\n                    errors.email.type === \"required\" && (\r\n                      <p>email is required field</p>\r\n                    )}\r\n                  {errors &&\r\n                    errors.email &&\r\n                    errors.email.type === \"pattern\" && (\r\n                      <p>invalid email formate</p>\r\n                    )}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"form-control form-control-lg\"\r\n                    id=\"exampleInputUsername1\"\r\n                    placeholder=\"Date of birth\"\r\n                    name=\"dob\"\r\n                    {...register(\"dob\", { required: true })}\r\n                    defaultValue={cookie?.user?.dob}\r\n                  />\r\n                  {errors && errors.dob && <p>birthdate is required field</p>}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control form-control-lg\"\r\n                    id=\"exampleInputUsername1\"\r\n                    placeholder=\"Contact number\"\r\n                    name=\"contactno\"\r\n                    {...register(\"contactno\", {\r\n                      required: true,\r\n                      pattern: strongRegexMo,\r\n                    })}\r\n                    defaultValue={cookie?.user?.contactno}\r\n                  />\r\n                  {errors &&\r\n                    errors.contactno &&\r\n                    errors.contactno.type === \"required\" && (\r\n                      <p>contact number is required field</p>\r\n                    )}\r\n                  {errors &&\r\n                    errors.contactno &&\r\n                    errors.contactno.type === \"pattern\" && (\r\n                      <p>invalid phone number please use valid formate</p>\r\n                    )}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <select\r\n                    className=\"form-control form-control-lg\"\r\n                    id=\"exampleFormControlSelect2\"\r\n                    defaultValue={cookie?.user?.country}\r\n                    name=\"country\"\r\n                    {...register(\"country\", {\r\n                      required: true,\r\n                    })}\r\n                  >\r\n                    <option>Country</option>\r\n                    <option>United States of America</option>\r\n                    <option selected>India</option>\r\n                    <option>United Kingdom</option>\r\n                    <option>Germany</option>\r\n                    <option>Argentina</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {cookie?.user?.registrationType !== 'google' && <div className=\"form-group\">\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"form-control form-control-lg\"\r\n                    id=\"exampleInputPassword1\"\r\n                    placeholder=\"Password\"\r\n                    autoComplete=\"new-password\"\r\n                    name=\"password\"\r\n                    {...register(\"password\", {\r\n                      required: false,\r\n                      pattern: strongRegex,\r\n                    })}\r\n                  />\r\n                  <p>\r\n                   Note :- if you don't want to update your password then simply leave it blank or fill your new password\r\n                  </p>\r\n\r\n                  {errors &&\r\n                    errors.password &&\r\n                    errors.password.type === \"pattern\" && (\r\n                      <p>\r\n                        password should have at least 8 characters , 1 number\r\n                        and latter\r\n                      </p>\r\n                    )}\r\n                </div>}\r\n                <div className=\"mb-4\">\r\n                  <div className=\"form-check\">\r\n                    <label className=\"form-check-label text-muted\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        className=\"form-check-input\"\r\n                        name=\"terms\"\r\n                        {...register(\"terms\", { required: true })}\r\n                      />\r\n                      <i className=\"input-helper\"></i> Confirm your deatils\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-3\">\r\n                  <button\r\n                    className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\r\n                    type=\"submit\"\r\n                    disabled={!isDirty || !isValid}\r\n                  >\r\n                    UPDATE PROFILE\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n"],"sourceRoot":""}