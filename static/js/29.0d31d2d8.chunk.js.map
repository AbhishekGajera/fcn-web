{"version":3,"sources":["utils/Functions/useDebounce.js","utils/Functions/useUrl.js","app/Admin-components/Product/ProductFetch.js"],"names":["useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useUrl","param","history","useHistory","useLocation","search","pathname","url","URLSearchParams","urlParam","get","setValue","val","set","replace","toString","ProductList","searchTerm","setSearchTerm","debouncedSearchTerm","selectedProductType","selectedProductCategory","isChecked","setIsChecked","pageCount","setPageCount","itemOffset","setItemOffset","itemsPerPage","useCookies","cookies","setCookie","itemlist","setitemlist","isLoading","setIsLoading","list","getProductsList","data","items","results","totalPages","response","message","toast","error","process","code","formData","JSON","stringify","refreshToken","localStorage","getItem","path","userLogout","finally","push","handleMultiChange","e","target","id","checked","className","aria-label","href","onClick","event","preventDefault","user","role","aria-current","action","type","placeholder","onChange","Fragment","map","item","index","key","name","category","description","status","formateStatus","console","log","UpdateProducts","success","autoClose","statusChanged","selected","uid","Swal","fire","title","text","icon","showCancelButton","cancelButtonColor","confirmButtonColor","confirmButtonText","cancelButtonText","then","result","deleteProductById","itemList","Object","keys","Promise","all","dismiss","DismissReason","cancel","imageURL","image","window","open","breakLabel","nextLabel","onPageChange","pageRangeDisplayed","previousLabel","renderOnZeroPageCount","forcePage"],"mappings":"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","file":"static/js/29.0d31d2d8.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\n// Hook\r\nexport const useDebounce = (value, delay) => {\r\n    // State and setters for debounced value\r\n    const [debouncedValue, setDebouncedValue] = useState(value);\r\n    useEffect(\r\n      () => {\r\n        // Update debounced value after delay\r\n        const handler = setTimeout(() => {\r\n          setDebouncedValue(value);\r\n        }, delay);\r\n        // Cancel the timeout if value changes (also on delay change or unmount)\r\n        // This is how we prevent debounced value from updating if value is changed ...\r\n        // .. within the delay period. Timeout gets cleared and restarted.\r\n        return () => {\r\n          clearTimeout(handler);\r\n        };\r\n      },\r\n      [value, delay] // Only re-call effect if value or delay changes\r\n    );\r\n    return debouncedValue;\r\n  }","import { useState } from 'react'\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nexport const useUrl = (param) => {\r\n\r\n    const history = useHistory()\r\n    const { search, pathname } = useLocation()\r\n    const url = new URLSearchParams(search)\r\n\r\n    const urlParam = url.get(param)\r\n    const [value, setValue] = useState(urlParam !== null ? urlParam : '')\r\n\r\n    function _setValue(val){\r\n        url.set(param, val)\r\n        history.replace({ pathname, search: url.toString() }); \r\n        setValue(val)\r\n    }\r\n\r\n    return [value, _setValue]\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport { deleteProductById, getProductsList, userLogout, UpdateProducts } from \"../../../utils/APIs\";\r\nimport Swal from \"sweetalert2\";\r\nimport { useDebounce } from \"../../../utils/Functions/useDebounce\";\r\nimport Spinner from \"../../shared/Spinner\";\r\nimport { useUrl } from \"../../../utils/Functions/useUrl\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nconst ProductList = () => {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const debouncedSearchTerm = useDebounce(searchTerm, 500);\r\n\r\n  const [selectedProductType, setselectedProductType] = useState(\"\");\r\n  const [selectedProductCategory, setselectedProductCategory] = useState(\"\");\r\n  const [isChecked, setIsChecked] = useState(\"\");\r\n\r\n  // We start with an empty list of items.\r\n  const [pageCount, setPageCount] = useState(0);\r\n  // Here we use item offsets; we could also use page offsets\r\n  // following the API or data you're working with.\r\n  const [itemOffset, setItemOffset] = useUrl(\"page\");\r\n  const [itemsPerPage] = useState(10);\r\n  const [cookies, setCookie] = useCookies([\"user\"]);\r\n  const [itemlist, setitemlist] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const history = useHistory()\r\n\r\n  useEffect(() => {\r\n    list();\r\n  }, [itemOffset, itemsPerPage, selectedProductType, selectedProductCategory, debouncedSearchTerm]);\r\n\r\n  // Invoke when user click to request another page. \r\n  const handlePageClick = (event) => {\r\n    setItemOffset(event.selected);\r\n  };\r\n  const statusChanged = (id, e) => {\r\n    console.log(e.target.value, id);\r\n    UpdateProducts({\r\n      \"productId\": id,\r\n      \"status\": e.target.value\r\n    })\r\n    toast.success('Status updated successfully', {\r\n      autoClose: true\r\n    })\r\n  }\r\n\r\n  const deleteProduct = (uid) => {\r\n    Swal.fire({\r\n      title: \"Are you sure?\",\r\n      text: \"You will not be able to recover this imaginary file!\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      cancelButtonColor: \"#DD6B55\",\r\n      confirmButtonColor: \"#DD6B55\",\r\n      confirmButtonText: \"Yes, delete it!\",\r\n      cancelButtonText: \"No, keep it\",\r\n    }).then((result) => {\r\n      if (result.value) {\r\n        if (isChecked == '') {\r\n          return (\r\n            deleteProductById(uid).finally(() => list()),\r\n            Swal.fire(\r\n              \"Deleted!\",\r\n              \"Your imaginary file has been deleted.\",\r\n              \"success\"\r\n            )\r\n          );\r\n        } else {\r\n          const itemList = Object.keys(isChecked).map((id) => {\r\n            if (isChecked[id] === true) {\r\n              deleteProductById(id)\r\n            }\r\n            Swal.fire(\r\n              \"Deleted!\",\r\n              \"Your imaginary file has been deleted.\",\r\n              \"success\"\r\n            )\r\n          })\r\n          Promise.all(itemList).then(() => {\r\n            list();\r\n          });\r\n        }\r\n      }else if (result.dismiss === Swal.DismissReason.cancel) {\r\n        Swal.fire(\"Cancelled\", \"Your imaginary file is safe :)\", \"error\");\r\n      }\r\n    });\r\n  };\r\n\r\n  const onClickDownload = (imageURL) => {\r\n    window.open(imageURL, '_blank');\r\n  }\r\n\r\n  const list = async () => {\r\n    setIsLoading(true)\r\n    try {\r\n      const items = await (\r\n        await getProductsList(\r\n          itemsPerPage,\r\n          +itemOffset + 1,\r\n          searchTerm,\r\n        )\r\n      ).data;\r\n      setitemlist(items?.results);\r\n      setPageCount(items?.totalPages);\r\n      setIsLoading(false)\r\n    } catch (error) {\r\n      if (error?.response?.data?.message) {\r\n        toast.error(error.response.data.message);\r\n      } else {\r\n        toast.error(process.env.REACT_APP_ERROR_MESSAGE);\r\n      }\r\n\r\n      if (error?.response?.data?.code === 401) {\r\n        const formData = JSON.stringify({\r\n          refreshToken: localStorage.getItem(\"refreshToken\"),\r\n        });\r\n        setCookie(\"user\", null, { path: \"/\" });\r\n        userLogout(formData).finally(() => {\r\n          history.push(\"/user-pages/login-1\");\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  const formateStatus = (status) => {\r\n    switch (status) {\r\n      case '0':\r\n        return \"Inactive\";\r\n      case '1':\r\n        return \"Active\";\r\n      default:\r\n        return 'Active';\r\n    }\r\n  }\r\n\r\n  const handleMultiChange = (e) => {\r\n    setIsChecked({ ...isChecked, [e.target.id]: e.target.checked });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"page-header\">\r\n        <h3 className=\"page-title\">Products / Show Products </h3>\r\n        <nav aria-label=\"breadcrumb\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\">\r\n              <a href=\"!#\" onClick={(event) => event.preventDefault()}>\r\n                {cookies?.user?.role} Dashboard\r\n              </a>\r\n            </li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">\r\n              Show Products\r\n            </li>\r\n          </ol>\r\n        </nav>\r\n      </div>\r\n      <div className=\"col-lg-12 grid-margin stretch-card p0\">\r\n        <div className=\"card\">\r\n          <div className=\"card-body\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">\r\n              </div>\r\n\r\n              <div className=\"col-md-6\">\r\n                <div className=\"search-field d-none d-md-block\">\r\n                  <form className=\"d-flex align-items-center h-100\" action=\"#\">\r\n                    <div className=\"input-group\">\r\n                      <div className=\"input-group-prepend outline-gray bg-transparent\">\r\n                        <i className=\"input-group-text border-0 mdi mdi-magnify\"></i>\r\n                      </div>\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"form-control outline-gray bg-transparent border-0\"\r\n                        placeholder=\"Search Products\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => {\r\n                          setSearchTerm(e?.target?.value);\r\n                          setItemOffset(0);\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n            <h4 className=\"card-title\">Product list</h4>\r\n\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table table-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th></th>\r\n                    <th> Name </th>\r\n                    <th> Category </th>\r\n                    <th> Description </th>\r\n                    <th > Status </th>\r\n                    <th> Delete </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {\r\n                    isLoading ? <React.Fragment><Spinner /></React.Fragment>\r\n                      :\r\n                      itemlist?.map((item, index) => {\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td>\r\n                              <input type=\"checkbox\" id={item?.id} value={item?.id} onChange={handleMultiChange} />\r\n                            </td>\r\n                            <td>{item?.name}</td>\r\n                            <td>{item?.category}</td>\r\n                            <td>{item?.description}</td>\r\n                            <td>{formateStatus(item?.status)}</td>\r\n                            <td>\r\n                              <select\r\n                                id={item.id}\r\n                                onChange={(e) => statusChanged(item.id, e)}\r\n                              >\r\n                                <option\r\n                                  value=\"0\"\r\n                                  selected={item.status == 0 ? \"selected\" : false}\r\n                                >\r\n                                  InActive\r\n                                </option>\r\n                                <option\r\n                                  value=\"1\"\r\n                                  selected={item.status == 1 ? \"selected\" : false}\r\n                                >\r\n                                  Active\r\n                                </option>\r\n                              </select>\r\n                            </td>\r\n                            <td>\r\n                              <i\r\n                                onClick={() => deleteProduct(item?.id)}\r\n                                className=\"mdi mdi-delete\"\r\n                              ></i>\r\n                            </td>\r\n                            <td>\r\n                              <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-gradient-primary btn-sm \"\r\n                                onClick={() => onClickDownload(item?.image)}\r\n                              >\r\n                                Download Product Image\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                </tbody>\r\n              </table>\r\n              <ReactPaginate\r\n                breakLabel=\"...\"\r\n                nextLabel=\"next >\"\r\n                className=\"client-list\"\r\n                onPageChange={handlePageClick}\r\n                pageRangeDisplayed={5}\r\n                pageCount={pageCount}\r\n                previousLabel=\"< previous\"\r\n                renderOnZeroPageCount={null}\r\n                forcePage={itemOffset}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductList;\r\n"],"sourceRoot":""}