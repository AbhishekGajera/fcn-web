{"version":3,"sources":["app/Admin-components/Video/AddVideo.js"],"names":["AddVideo","useCookies","cookies","history","useHistory","useForm","mode","register","handleSubmit","reset","formState","errors","values","isDirty","isValid","getValues","onSubmit","data","console","log","file","formData","FormData","append","ImageUpload","fileResult","user","id","category","error","toast","message","url","secure_url","addVideo","success","push","response","process","className","aria-label","href","onClick","event","preventDefault","role","aria-current","style","display","justifyContent","enctype","Group","type","name","value","defaultChecked","Control","accept","multiple","required","e","element","document","getElementById","click"],"mappings":"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","file":"static/js/74.3061a407.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Form } from \"react-bootstrap\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { toast } from \"react-toastify\";\r\nimport { addVideo, ImageUpload } from \"../../../utils/APIs\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst AddVideo = () => {\r\n    const [cookies] = useCookies([\"user\"]);\r\n    const history = useHistory();\r\n\r\n    const handleUpload = (e) => {\r\n        e.preventDefault()\r\n        const element = document.getElementById('input-id');\r\n        if (element) {\r\n            element.click()\r\n        }\r\n    };\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        reset,\r\n        formState: { errors, isDirty, isValid },\r\n        getValues,\r\n    } = useForm({\r\n        mode: \"onChange\",\r\n    });\r\n\r\n    const values = getValues();\r\n\r\n    const onSubmit = async (data) => {\r\n        console.log(\"dl\",data.file[0])\r\n\r\n        const formData = new FormData()\r\n        formData.append('files', data.file[0]);\r\n        const fileResult = await ImageUpload(formData)\r\n        formData.append(\"user\", cookies?.user?.id)\r\n        formData.append(\"type\", data?.category)\r\n        formData.append(\"title\", 'sample')\r\n      \r\n\r\n        if (fileResult.error) {\r\n            toast.error(fileResult.error.message);\r\n        } else {\r\n            try {\r\n                formData.url = fileResult.secure_url;\r\n                console.log(\"myfl\",formData)\r\n                await addVideo(formData);\r\n                toast.success(\"Add Video successfully\");\r\n                reset()\r\n                history.push(\"/video/fetch-video\");\r\n            } catch (error) {\r\n                if (\r\n                    error &&\r\n                    error.response &&\r\n                    error.response.data &&\r\n                    error.response.data.message\r\n                ) {\r\n                    toast.error(error.response.data.message);\r\n                } else {\r\n                    toast.error(process.env.REACT_APP_ERROR_MESSAGE);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"page-header\">\r\n                <h3 className=\"page-title\">Video / Add Video </h3>\r\n                <nav aria-label=\"breadcrumb\">\r\n                    <ol className=\"breadcrumb\">\r\n                        <li className=\"breadcrumb-item\">\r\n                            <a href=\"!#\" onClick={(event) => event.preventDefault()}>\r\n                                {cookies?.user?.role} Dashboard\r\n                            </a>\r\n                        </li>\r\n                        <li className=\"breadcrumb-item active\" aria-current=\"page\">\r\n                            Add Video\r\n                        </li>\r\n                    </ol>\r\n                </nav>\r\n            </div>\r\n            <div\r\n                className=\"row auth\"\r\n                style={{ display: \"flex\", justifyContent: \"center\" }}\r\n            >\r\n                <div className=\"col-lg-6 col-md-8 col-sm-12 col-xs-12 grid-margin\">\r\n                    <div className=\"card\">\r\n                        <div className=\"card-body\">\r\n                            <form className=\"form-sample\" onSubmit={handleSubmit(onSubmit)} enctype=\"multipart/form-data\">\r\n                                <p className=\"card-description\"> Add Video </p>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-12\">\r\n                                        <Form.Group className=\"row\">\r\n                                            <label className=\"col-sm-4 col-form-label\">Category</label>\r\n                                            <div className=\"col-sm-8 d-flex align-item-center\">\r\n                                                <div className=\"form-check\">\r\n                                                    <label className=\"form-check-label\">\r\n                                                        <input type=\"radio\" className=\"form-check-input\" name=\"category\" id=\"optionsRadios1\" value=\"free\" />\r\n                                                        <i className=\"input-helper\"></i>\r\n                                                        Free\r\n                                                    </label>\r\n                                                </div>\r\n                                                <div className=\"form-check ml-3\">\r\n                                                    <label className=\"form-check-label\">\r\n                                                        <input type=\"radio\" className=\"form-check-input\" name=\"category\" id=\"optionsRadios2\" value=\"paid\" defaultChecked />\r\n                                                        <i className=\"input-helper\"></i>\r\n                                                        Paid\r\n                                                    </label>\r\n                                            </div>\r\n                                                </div>\r\n                                        </Form.Group>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-md-12\">\r\n                                        <Form.Group className=\"row\">\r\n                                            <label className=\"col-sm-4 col-form-label\">\r\n                                                Upload Video{\" \"}</label>\r\n\r\n                                            <div className=\"col-sm-8\">\r\n                                                <Form.Control\r\n                                                    id=\"input-id\"\r\n                                                    className=\"d-none\"\r\n                                                    type=\"file\"\r\n                                                    name=\"file\"\r\n                                                    accept=\"video/mp4,video/x-m4v,video/*\"\r\n                                                    multiple={false}\r\n                                                    {...register(\"file\", { required: true })}\r\n                                                />\r\n\r\n                                                <button\r\n                                                    onClick={handleUpload}\r\n                                                    className={`btn btn-outline-${values?.file?.[0]?.name ? \" btn-primary\" : \" btn-primary\"\r\n                                                        }`}\r\n                                                >\r\n                                                    {values?.file?.[0]?.name ? values?.file?.[0]?.name : \"Upload Video\"}\r\n                                                </button>\r\n                                                {errors && errors.file && (\r\n                                                    <p>Upload Video is required field</p>\r\n                                                )}\r\n                                                \r\n                                            </div>\r\n                                        </Form.Group>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div\r\n                                    className=\"mt-3\"\r\n                                    style={{ display: \"flex\", justifyContent: \"center\" }}\r\n                                >\r\n                                    <button\r\n                                        className=\"btn  btn-primary btn-lg font-weight-medium auth-form-btn\"\r\n                                        type=\"submit\"\r\n                                    >\r\n                                        SUBMIT\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AddVideo;\r\n"],"sourceRoot":""}