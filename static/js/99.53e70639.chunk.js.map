{"version":3,"sources":["app/user-pages/Login.js"],"names":["Login","history","useHistory","useForm","mode","register","handleSubmit","formState","errors","isDirty","isValid","useCookies","setCookie","onSubmit","data","terms","login","result","user","auth","path","localStorage","setItem","tokens","access","token","refresh","push","toast","success","response","message","error","process","handleLogin","googleData","formData","JSON","stringify","tokenId","googleLoginHandler","className","src","require","alt","Group","Control","type","placeholder","size","name","required","pattern","email","password","disabled","to","clientId","buttonText","onSuccess","onFailure","res","cookiePolicy"],"mappings":"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","file":"static/js/99.53e70639.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Form } from \"react-bootstrap\";\nimport { useForm } from \"react-hook-form\";\nimport { useCookies } from \"react-cookie\";\nimport { googleLoginHandler, login } from \"../../utils/APIs\";\nimport { toast } from \"react-toastify\";\nimport GoogleLogin from \"react-google-login\";\n\nconst Login = () => {\n  const history = useHistory();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isDirty, isValid },\n  } = useForm({\n    mode: \"onChange\",\n  });\n\n  const [, setCookie] = useCookies([\"user\"]);\n\n  const onSubmit = async (data) => {\n    delete data.terms;\n\n    try {\n      const result = await login(data);\n      result.data.user.auth = \"verified\";\n      setCookie(\"user\", result.data.user, { path: \"/\" });\n      localStorage.setItem(\"accessToken\", result.data.tokens.access.token);\n      localStorage.setItem(\"refreshToken\", result.data.tokens.refresh.token);\n      history.push(\"/dashboard\");\n      toast.success(\"login Successfully\");\n    } catch (error) {\n      if (\n        error &&\n        error.response &&\n        error.response.data &&\n        error.response.data.message\n      ) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error(process.env.REACT_APP_ERROR_MESSAGE);\n      }\n    }\n  };\n\n  const handleLogin = async (googleData) => {\n    const formData = JSON.stringify({\n      token: googleData.tokenId,\n    });\n\n    try {\n      const result = await googleLoginHandler(formData);\n      result.data.user.auth = \"verified\";\n      setCookie(\"user\", result.data.user, { path: \"/\" });\n      localStorage.setItem(\"accessToken\", result.data.tokens.access.token);\n      localStorage.setItem(\"refreshToken\", result.data.tokens.refresh.token);\n      toast.success(\"login sucssefully\");\n      history.push(\"/dashboard\");\n      \n    } catch (error) {\n      if (\n        error &&\n        error.response &&\n        error.response.data &&\n        error.response.data.message\n      ) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error(process.env.REACT_APP_ERROR_MESSAGE);\n      }\n    }\n  };\n\n  const handleLoginFailure = (res) => {\n    toast.error(res.error);\n  };\n\n  return (\n    <div>\n      <div className=\"d-flex align-items-center auth px-0\">\n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-4 mx-auto\">\n                <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\n                  <div className=\"brand-logo\">\n                    <img\n                      src={require(\"../../assets/images/fcn_logo.png\")}\n                      alt=\"logo\"\n                    />\n                  </div>\n                  <h4>Hello! let's get started</h4>\n                  <h6 className=\"font-weight-light\">Sign in to continue.</h6>\n                  <Form className=\"pt-3\" onSubmit={handleSubmit(onSubmit)}>\n                    <Form.Group className=\"d-flex flex-wrap search-field\">\n                      <Form.Control\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        size=\"lg\"\n                        name=\"email\"\n                        className=\"h-auto\"\n                        {...register(\"email\", {\n                          required: true,\n                          pattern: /^\\S+@\\S+$/i,\n                        })}\n                      />{\" \"}\n                      <br />\n                      {errors &&\n                        errors.email &&\n                        errors.email.type === \"required\" && (\n                          <p>email is required field</p>\n                        )}\n                      {errors &&\n                        errors.email &&\n                        errors.email.type === \"pattern\" && (\n                          <p>invalid email formate</p>\n                        )}\n                    </Form.Group>\n                    <Form.Group className=\"d-flex flex-wrap search-field\">\n                      <Form.Control\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        size=\"lg\"\n                        className=\"h-auto\"\n                        name=\"password\"\n                        {...register(\"password\", { required: true })}\n                      />{\" \"}\n                      <br />\n                      {errors && errors.password && (\n                        <p>password is required field</p>\n                      )}\n                    </Form.Group>\n                    <div className=\"mt-3\">\n                      <button\n                        className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n                        disabled={!isDirty || !isValid}\n                      >\n                        SIGN IN\n                      </button>\n                    </div>\n                    <div className=\"my-2 d-flex justify-content-between align-items-center\">\n                      <div className=\"form-check\">\n                        <label className=\"form-check-label text-muted\">\n                          <input\n                            type=\"checkbox\"\n                            className=\"form-check-input\"\n                            name=\"terms\"\n                            {...register(\"terms\")}\n                          />\n                          <i className=\"input-helper\"></i>\n                          Keep me signed in\n                        </label>\n                      </div>\n                      <Link\n                        to=\"/user-pages/forgot-password-1\"\n                        className=\"auth-link text-black\"\n                      >\n                        Forgot password?\n                      </Link>\n                    </div>\n                    <div className=\"mt-3 mb-3 google-registration-button\">\n                      <GoogleLogin\n                        clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\n                        buttonText=\"Sign in with Google\"\n                        onSuccess={handleLogin}\n                        onFailure={handleLoginFailure}\n                        cookiePolicy={\"single_host_origin\"}\n                      />\n                    </div>\n                    <div className=\"mb-2\">\n                      <button\n                        type=\"button\"\n                        className=\"btn btn-block btn-facebook auth-form-btn\"\n                      >\n                        <i className=\"mdi mdi-facebook mr-2\"></i>Connect using\n                        facebook\n                      </button>\n                    </div>\n                    <div className=\"text-center mt-4 font-weight-light\">\n                      Don't have an account?{\" \"}\n                      <Link\n                        to=\"/user-pages/register-1\"\n                        className=\"text-primary\"\n                      >\n                        Create\n                      </Link>\n                    </div>\n                  </Form>\n                </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}