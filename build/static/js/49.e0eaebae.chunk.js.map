{"version":3,"sources":["utils/Functions/useUrl.js","app/BranchComponents/EmployeeList/index.js"],"names":["useUrl","param","history","useHistory","useLocation","search","pathname","url","URLSearchParams","urlParam","get","useState","value","setValue","val","set","replace","toString","EmployeeList","useCookies","cookies","setCookie","itemlist","setitemlist","pageCount","setPageCount","itemOffset","setItemOffset","itemsPerPage","useEffect","getUsers","data","items","results","totalPages","console","info","response","message","toast","error","process","code","formData","JSON","stringify","refreshToken","localStorage","getItem","path","userLogout","finally","push","className","aria-label","href","onClick","event","preventDefault","user","role","aria-current","map","item","name","contactno","branch","email","breakLabel","nextLabel","onPageChange","selected","pageRangeDisplayed","previousLabel","renderOnZeroPageCount","forcePage"],"mappings":";2LAGaA,EAAS,SAACC,GAEnB,IAAMC,EAAUC,cAChB,EAA6BC,cAArBC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,SACVC,EAAM,IAAIC,gBAAgBH,GAE1BI,EAAWF,EAAIG,IAAIT,GACzB,EAA0BU,mBAAsB,OAAbF,EAAoBA,EAAW,IAAlE,mBAAOG,EAAP,KAAcC,EAAd,KAQA,MAAO,CAACD,EANR,SAAmBE,GACfP,EAAIQ,IAAId,EAAOa,GACfZ,EAAQc,QAAQ,CAAEV,WAAUD,OAAQE,EAAIU,aACxCJ,EAASC,O,g7MC6GFI,UApHM,WAAO,IAAD,EACnBhB,EAAUC,cAChB,EAA6BgB,YAAW,CAAC,SAAzC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAgCV,mBAAS,IAAzC,mBAAOW,EAAP,KAAiBC,EAAjB,KAEA,EAAkCZ,mBAAS,GAA3C,mBAAOa,EAAP,KAAkBC,EAAlB,KAGA,EAAoCzB,YAAO,QAA3C,mBAAO0B,EAAP,KAAmBC,EAAnB,KACA,EAAuBhB,mBAAS,IAAzBiB,EAAP,oBAEAC,qBAAU,WACR,sBAAC,uHAE8BC,YAASF,GAAeF,EAAW,GAFjE,8BAEqEK,KAFrE,OAESC,EAFT,OAGGT,EAAW,OAACS,QAAD,IAACA,OAAD,EAACA,EAAOC,SACnBR,EAAY,OAACO,QAAD,IAACA,OAAD,EAACA,EAAOE,YAJvB,kDAMGC,QAAQC,KAAK,SAAb,OACA,sCAAI,KAAOC,gBAAX,iBAAI,EAAiBN,YAArB,aAAI,EAAuBO,SACzBC,IAAMC,MAAM,KAAMH,SAASN,KAAKO,SAEhCC,IAAMC,MAAMC,wFAGsB,OAAhC,2CAAOJ,gBAAP,mBAAiBN,YAAjB,eAAuBW,QACnBC,EAAWC,KAAKC,UAAU,CAC9BC,aAAcC,aAAaC,QAAQ,kBAErC3B,EAAU,OAAQ,KAAM,CAAE4B,KAAM,MAChCC,aAAWP,GAAUQ,SAAQ,WAC3BjD,EAAQkD,KAAK,2BAnBpB,yDAAD,KAwBC,CAAC1B,EAAYE,IAMhB,OACE,6BACE,yBAAKyB,UAAU,eACb,wBAAIA,UAAU,cAAd,6BACA,yBAAKC,aAAW,cACd,wBAAID,UAAU,cACZ,wBAAIA,UAAU,mBACZ,uBAAGE,KAAK,KAAKC,QAAS,SAACC,GAAD,OAAWA,EAAMC,mBAAvC,OACGtC,QADH,IACGA,GADH,UACGA,EAASuC,YADZ,aACG,EAAeC,KADlB,eAIF,wBAAIP,UAAU,yBAAyBQ,eAAa,QAApD,qBAMN,yBAAKR,UAAU,yCACb,yBAAKA,UAAU,QACb,yBAAKA,UAAU,aACb,wBAAIA,UAAU,cAAd,iBAEA,yBAAKA,UAAU,oBACb,2BAAOA,UAAU,uBACf,+BACE,4BACE,sCACA,6CACA,wCACA,uCACA,sCACA,sCACA,0CAGJ,sCACG/B,QADH,IACGA,OADH,EACGA,EAAUwC,KAAI,SAACC,GACd,OACE,4BACE,mCAAKA,QAAL,IAAKA,OAAL,EAAKA,EAAMC,MACX,mCAAKD,QAAL,IAAKA,OAAL,EAAKA,EAAME,WACX,mCAAKF,QAAL,IAAKA,OAAL,EAAKA,EAAMG,QACX,mCAAKH,QAAL,IAAKA,OAAL,EAAKA,EAAMI,OACX,mCAAKJ,QAAL,IAAKA,OAAL,EAAKA,EAAMH,MACX,4BACE,uBAAGP,UAAU,yBAEf,4BACE,uBAAGA,UAAU,0BAOzB,kBAAC,IAAD,CACEe,WAAW,MACXC,UAAU,SACVhB,UAAU,cACViB,aA9DU,SAACb,GACvB9B,EAAc8B,EAAMc,WA8DRC,mBAAoB,EACpBhD,UAAWA,EACXiD,cAAc,aACdC,sBAAuB,KACvBC,UAAWjD","file":"static/js/49.e0eaebae.chunk.js","sourcesContent":["import { useState } from 'react'\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nexport const useUrl = (param) => {\r\n\r\n    const history = useHistory()\r\n    const { search, pathname } = useLocation()\r\n    const url = new URLSearchParams(search)\r\n\r\n    const urlParam = url.get(param)\r\n    const [value, setValue] = useState(urlParam !== null ? urlParam : '')\r\n\r\n    function _setValue(val){\r\n        url.set(param, val)\r\n        history.replace({ pathname, search: url.toString() }); \r\n        setValue(val)\r\n    }\r\n\r\n    return [value, _setValue]\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport { getUsers, userLogout } from \"../../../utils/APIs\";\r\nimport { useUrl } from \"../../../utils/Functions/useUrl\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst EmployeeList = () => {\r\n  const history = useHistory();\r\n  const [cookies, setCookie] = useCookies([\"user\"]);\r\n  const [itemlist, setitemlist] = useState([]);\r\n\r\n  const [pageCount, setPageCount] = useState(0);\r\n  // Here we use item offsets; we could also use page offsets\r\n  // following the API or data you're working with.\r\n  const [itemOffset, setItemOffset] = useUrl(\"page\");\r\n  const [itemsPerPage] = useState(10);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const items = await (await getUsers(itemsPerPage, +itemOffset+1)).data;\r\n        setitemlist(items?.results);\r\n        setPageCount(items?.totalPages);\r\n      } catch (error) {\r\n        console.info(\"error \", error);\r\n        if (error?.response?.data?.message) {\r\n          toast.error(error.response.data.message);\r\n        } else {\r\n          toast.error(process.env.REACT_APP_ERROR_MESSAGE);\r\n        }\r\n\r\n        if (error?.response?.data?.code === 401) {\r\n          const formData = JSON.stringify({\r\n            refreshToken: localStorage.getItem(\"refreshToken\"),\r\n          });\r\n          setCookie(\"user\", null, { path: \"/\" });\r\n          userLogout(formData).finally(() => {\r\n            history.push(\"/user-pages/login-1\");\r\n          });\r\n        }\r\n      }\r\n    })();\r\n  }, [itemOffset, itemsPerPage]);\r\n\r\n  // Invoke when user click to request another page.\r\n  const handlePageClick = (event) => {\r\n    setItemOffset(event.selected);\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"page-header\">\r\n        <h3 className=\"page-title\">Clients / Fetch Employee </h3>\r\n        <nav aria-label=\"breadcrumb\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\">\r\n              <a href=\"!#\" onClick={(event) => event.preventDefault()}>\r\n                {cookies?.user?.role} Dashboard\r\n              </a>\r\n            </li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">\r\n              Fetch Employee\r\n            </li>\r\n          </ol>\r\n        </nav>\r\n      </div>\r\n      <div className=\"col-lg-12 grid-margin stretch-card p0\">\r\n        <div className=\"card\">\r\n          <div className=\"card-body\">\r\n            <h4 className=\"card-title\">Employee list</h4>\r\n\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table table-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th> Name </th>\r\n                    <th> Contact no. </th>\r\n                    <th> Branch </th>\r\n                    <th> Email </th>\r\n                    <th> Role </th>\r\n                    <th> Edit </th>\r\n                    <th> Delete </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {itemlist?.map((item) => {\r\n                    return (\r\n                      <tr>\r\n                        <td>{item?.name}</td>\r\n                        <td>{item?.contactno}</td>\r\n                        <td>{item?.branch}</td>\r\n                        <td>{item?.email}</td>\r\n                        <td>{item?.role}</td>\r\n                        <td>\r\n                          <i className=\"mdi mdi-lead-pencil\"></i>\r\n                        </td>\r\n                        <td>\r\n                          <i className=\"mdi mdi-delete\"></i>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n              <ReactPaginate\r\n                breakLabel=\"...\"\r\n                nextLabel=\"next >\"\r\n                className=\"client-list\"\r\n                onPageChange={handlePageClick}\r\n                pageRangeDisplayed={5}\r\n                pageCount={pageCount}\r\n                previousLabel=\"< previous\"\r\n                renderOnZeroPageCount={null}\r\n                forcePage={itemOffset}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmployeeList;\r\n"],"sourceRoot":""}