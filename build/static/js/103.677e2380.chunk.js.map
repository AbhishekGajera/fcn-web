{"version":3,"sources":["app/user-pages/Settings.js"],"names":["Settings","history","useHistory","useForm","mode","register","handleSubmit","formState","errors","isDirty","isValid","getValues","useCookies","cookie","setCookie","onClickLogoutHandler","formData","JSON","stringify","refreshToken","localStorage","getItem","path","userLogout","finally","push","onSubmit","data","terms","password","Data","FormData","append","image","ImageUpload","fileResult","error","toast","message","avatar","secure_url","console","log","updateProfile","user","id","result","success","response","process","code","values","strongRegex","RegExp","strongRegexMo","className","src","alt","require","autoComplete","type","placeholder","name","defaultValue","required","email","pattern","dob","contactno","country","selected","registrationType","multiple","onClick","e","preventDefault","element","document","getElementById","click","style","width","disabled"],"mappings":"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","file":"static/js/103.677e2380.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { updateProfile, userLogout, ImageUpload } from \"../../utils/APIs\";\nimport { useCookies } from \"react-cookie\";\nimport { toast } from \"react-toastify\";\n\nconst Settings = () => {\n  const history = useHistory();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isDirty, isValid },\n    getValues,\n  } = useForm({\n    mode: \"onChange\",\n  });\n\n  const [cookie, setCookie] = useCookies([\"user\"]);\n\n\n  const onClickLogoutHandler = async () => {\n    const formData = JSON.stringify({\n      refreshToken: localStorage.getItem(\"refreshToken\"),\n    });\n    setCookie(\"user\", null, { path: \"/\" });\n    userLogout(formData).finally(() => {\n      history.push(\"/user-pages/login-1\");\n    });\n  };\n\n  const onSubmit = async (data) => {\n    delete data.terms;\n    if (!data.password) {\n      delete data.password\n    }\n    const Data = new FormData();\n    Data.append('file', data.image[0]);\n    const fileResult = await ImageUpload(Data)\n    if (fileResult.error) {\n      toast.error(fileResult.error.message);\n    } else {\n      try {\n        delete data.image;\n        data.avatar = fileResult.secure_url;\n        console.log(\"data\", data)\n        const result = await updateProfile(data, cookie?.user?.id);\n        setCookie('user', result.data, { path: '/' });\n        toast.success(\"Profile updated sucssefully\");\n      } catch (error) {\n        if (error?.response?.data?.message) {\n          toast.error(error?.response?.data.message);\n        } else {\n          toast.error(process.env.REACT_APP_ERROR_MESSAGE);\n        }\n\n        if (error?.response?.data?.code === 401) {\n          onClickLogoutHandler();\n        }\n      }\n    }\n  };\n\n  const values = getValues();\n\n  const handleUpload = (e) => {\n    e.preventDefault()\n    const element = document.getElementById('input-id');\n    if (element) {\n      element.click()\n    }\n  };\n\n  var strongRegex = new RegExp(\"^(?=.*[A-Za-z])(?=.*[0-9])(?=.{8,})\");\n  var strongRegexMo = new RegExp(\n    \"^\\\\s*(?:\\\\+?(\\\\d{1,3}))?[-. (]*(\\\\d{3})[-. )]*(\\\\d{3})[-. ]*(\\\\d{4})(?: *x(\\\\d+))?\\\\s*$\"\n  );\n\n  return (\n    <div>\n      <div className=\"d-flex align-items-center auth px-0\">\n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-7 mx-auto\">\n            <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\n              <div className=\"d-flex align-items-center justify-content-center\">\n                <div className=\"nav-profile-img\">\n                  {cookie?.user?.avatar ? (\n                    <img src={cookie?.user?.avatar} alt=\"user\" />\n                  ) : (\n                    <img src={require(\"../../assets/images/faces/face1.jpg\")}\n                      alt=\"user\"\n                    />\n                  )}\n                  <span className=\"availability-status online\"></span>\n                </div>\n              </div>\n              <h4>Change in details?</h4>\n              <h6 className=\"font-weight-light\">\n                Update your profile is normal, no required to verify again\n              </h6>\n              <form\n                className=\"pt-3\"\n                autoComplete=\"new-password\"\n                onSubmit={handleSubmit(onSubmit)}\n              >\n                <div className=\"form-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control form-control-lg\"\n                    id=\"exampleInputUsername1\"\n                    placeholder=\"Username\"\n                    name=\"name\"\n                    defaultValue={cookie?.user?.name}\n                    {...register(\"name\", { required: true })}\n                  />\n                  {errors && errors.name && <p>name is required field</p>}\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control form-control-lg\"\n                    id=\"exampleInputEmail1\"\n                    placeholder=\"Email\"\n                    name=\"email\"\n                    defaultValue={cookie?.user?.email}\n                    {...register(\"email\", {\n                      required: true,\n                      pattern: /^\\S+@\\S+$/i,\n                    })}\n                  />\n                  {errors &&\n                    errors.email &&\n                    errors.email.type === \"required\" && (\n                      <p>email is required field</p>\n                    )}\n                  {errors &&\n                    errors.email &&\n                    errors.email.type === \"pattern\" && (\n                      <p>invalid email formate</p>\n                    )}\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"date\"\n                    className=\"form-control form-control-lg\"\n                    id=\"exampleInputUsername1\"\n                    placeholder=\"Date of birth\"\n                    name=\"dob\"\n                    {...register(\"dob\", { required: true })}\n                    defaultValue={cookie?.user?.dob}\n                  />\n                  {errors && errors.dob && <p>birthdate is required field</p>}\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control form-control-lg\"\n                    id=\"exampleInputUsername1\"\n                    placeholder=\"Contact number\"\n                    name=\"contactno\"\n                    {...register(\"contactno\", {\n                      required: true,\n                      pattern: strongRegexMo,\n                    })}\n                    defaultValue={cookie?.user?.contactno}\n                  />\n                  {errors &&\n                    errors.contactno &&\n                    errors.contactno.type === \"required\" && (\n                      <p>contact number is required field</p>\n                    )}\n                  {errors &&\n                    errors.contactno &&\n                    errors.contactno.type === \"pattern\" && (\n                      <p>invalid phone number please use valid formate</p>\n                    )}\n                </div>\n                <div className=\"form-group\">\n                  <select\n                    className=\"form-control form-control-lg\"\n                    id=\"exampleFormControlSelect2\"\n                    defaultValue={cookie?.user?.country}\n                    name=\"country\"\n                    {...register(\"country\", {\n                      required: true,\n                    })}\n                  >\n                    <option>Country</option>\n                    <option>United States of America</option>\n                    <option selected>India</option>\n                    <option>United Kingdom</option>\n                    <option>Germany</option>\n                    <option>Argentina</option>\n                  </select>\n                </div>\n                {cookie?.user?.registrationType !== 'google' && <div className=\"form-group\">\n                  <input\n                    type=\"password\"\n                    className=\"form-control form-control-lg\"\n                    id=\"exampleInputPassword1\"\n                    placeholder=\"Password\"\n                    autoComplete=\"new-password\"\n                    name=\"password\"\n                    {...register(\"password\", {\n                      required: false,\n                      pattern: strongRegex,\n                    })}\n                  />\n                  <p>\n                    Note :- if you don't want to update your password then simply leave it blank or fill your new password\n                  </p>\n\n                  {errors &&\n                    errors.password &&\n                    errors.password.type === \"pattern\" && (\n                      <p>\n                        password should have at least 8 characters , 1 number\n                        and latter\n                      </p>\n                    )}\n                </div>}\n                <div className=\"form-group\">\n                  <input\n                    id=\"input-id\"\n                    className=\"d-none\"\n                    type=\"file\"\n                    name=\"image\"\n                    multiple={false}\n                    {...register(\"image\", { required: true })}\n                  />\n\n                  <button\n                    onClick={handleUpload}\n                    style={{ width: '100%' }}\n                    className={`btn btn-outline-${values?.image?.[0]?.name ? \" btn-primary\" : \" btn-primary\"\n                      }`}\n                  >\n                    {values?.image?.[0]?.name ? values?.image?.[0]?.name : \"Upload Profile\"}\n                  </button>\n                </div>\n                <div className=\"mb-4\">\n                  <div className=\"form-check\">\n                    <label className=\"form-check-label text-muted\">\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-check-input\"\n                        name=\"terms\"\n                        {...register(\"terms\", { required: true })}\n                      />\n                      <i className=\"input-helper\"></i> Confirm your deatils\n                    </label>\n                  </div>\n                </div>\n                <div className=\"mt-3\">\n                  <button\n                    className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n                    type=\"submit\"\n                    disabled={!isDirty || !isValid}\n                  >\n                    UPDATE PROFILE\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;\n"],"sourceRoot":""}