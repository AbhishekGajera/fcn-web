{"version":3,"sources":["app/user-pages/Login.js"],"names":["Login","history","useHistory","useForm","mode","register","handleSubmit","formState","errors","isDirty","isValid","useCookies","setCookie","onSubmit","data","terms","login","result","console","info","user","auth","first_name","last_name","name","dob","contactno","role","isEmailVerified","email","IBO","id","path","localStorage","setItem","tokens","access","token","refresh","push","toast","success","response","message","error","process","className","src","require","alt","Group","Control","type","placeholder","size","required","pattern","password","disabled","to"],"mappings":"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","file":"static/js/106.5d110e16.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { Form } from \"react-bootstrap\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { googleLoginHandler, login } from \"../../utils/APIs\";\r\nimport { toast } from \"react-toastify\";\r\nimport GoogleLogin from \"react-google-login\";\r\n\r\nconst Login = () => {\r\n  const history = useHistory();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors, isDirty, isValid },\r\n  } = useForm({\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  const [, setCookie] = useCookies([\"user\"]);\r\n\r\n  const onSubmit = async (data) => {\r\n    delete data.terms;\r\n\r\n    \r\n    try {\r\n      const result = await login(data);\r\n      console.info(\"data++ \",result.data.user)\r\n      result.data.user.auth = \"verified\";\r\n      setCookie(\"user\", {\r\n        first_name : result?.data?.user?.first_name,\r\n        last_name : result?.data?.user?.last_name,\r\n        name : result?.data?.user.name,\r\n        dob : result?.data?.user?.dob,\r\n        contactno : result?.data?.user?.contactno,\r\n        auth : result?.data?.user?.auth,\r\n        role : result?.data?.user?.role,\r\n        isEmailVerified : result?.data?.user?.isEmailVerified,\r\n        email : result?.data?.user?.email, \r\n        IBO : {\r\n          first_name : result?.data?.user?.IBO?.first_name,\r\n          last_name : result?.data?.user?.IBO?.last_name,\r\n          name : result?.data?.user?.IBO?.name,\r\n          id : result?.data?.user?.IBO?.id,\r\n        },\r\n        id : result?.data?.user?.id\r\n      }, { path: \"/\" });\r\n      localStorage.setItem(\"accessToken\", result.data.tokens.access.token);\r\n      localStorage.setItem(\"refreshToken\", result.data.tokens.refresh.token);\r\n      history.push(\"/dashboard\");\r\n      toast.success(\"login Successfully\");\r\n    } catch (error) {\r\n      if (\r\n        error &&\r\n        error.response &&\r\n        error.response.data &&\r\n        error.response.data.message\r\n      ) {\r\n        toast.error(error.response.data.message);\r\n      } else {\r\n        toast.error(process.env.REACT_APP_ERROR_MESSAGE);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLogin = async (googleData) => {\r\n    const formData = JSON.stringify({\r\n      token: googleData.tokenId,\r\n    });\r\n\r\n    try {\r\n      const result = await googleLoginHandler(formData);\r\n      result.data.user.auth = \"verified\";\r\n      setCookie(\"user\", result.data.user, { path: \"/\" });\r\n      localStorage.setItem(\"accessToken\", result.data.tokens.access.token);\r\n      localStorage.setItem(\"refreshToken\", result.data.tokens.refresh.token);\r\n      toast.success(\"login sucssefully\");\r\n      history.push(\"/dashboard\");\r\n      \r\n    } catch (error) {\r\n      if (\r\n        error &&\r\n        error.response &&\r\n        error.response.data &&\r\n        error.response.data.message\r\n      ) {\r\n        toast.error(error.response.data.message);\r\n      } else {\r\n        toast.error(process.env.REACT_APP_ERROR_MESSAGE);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLoginFailure = (res) => {\r\n    toast.error(res.error);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex align-items-center login-auth auth px-0\">\r\n        <div className=\"row w-100 mx-0\">\r\n          <div className=\"col-lg-4 mx-auto\">\r\n                <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\r\n                  <div className=\"brand-logo\">\r\n                    <img\r\n                      src={require(\"../../assets/images/fcn_logo.png\")}\r\n                      alt=\"logo\"\r\n                    />\r\n                  </div>\r\n                  <h4>Hello! let's get started</h4>\r\n                  <h6 className=\"font-weight-light\">Sign in to continue.</h6>\r\n                  <Form className=\"pt-3\" onSubmit={handleSubmit(onSubmit)}>\r\n                    <Form.Group className=\"d-flex flex-wrap search-field\">\r\n                      <Form.Control\r\n                        type=\"email\"\r\n                        placeholder=\"Email\"\r\n                        size=\"lg\"\r\n                        name=\"email\"\r\n                        className=\"h-auto\"\r\n                        {...register(\"email\", {\r\n                          required: true,\r\n                          pattern: /^\\S+@\\S+$/i,\r\n                        })}\r\n                      />{\" \"}\r\n                      <br />\r\n                      {errors &&\r\n                        errors.email &&\r\n                        errors.email.type === \"required\" && (\r\n                          <p>email is required field</p>\r\n                        )}\r\n                      {errors &&\r\n                        errors.email &&\r\n                        errors.email.type === \"pattern\" && (\r\n                          <p>invalid email formate</p>\r\n                        )}\r\n                    </Form.Group>\r\n                    <Form.Group className=\"d-flex flex-wrap search-field\">\r\n                      <Form.Control\r\n                        type=\"password\"\r\n                        placeholder=\"Password\"\r\n                        size=\"lg\"\r\n                        className=\"h-auto\"\r\n                        name=\"password\"\r\n                        {...register(\"password\", { required: true })}\r\n                      />{\" \"}\r\n                      <br />\r\n                      {errors && errors.password && (\r\n                        <p>password is required field</p>\r\n                      )}\r\n                    </Form.Group>\r\n                    <div className=\"mt-3\">\r\n                      <button\r\n                        className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\r\n                        disabled={!isDirty || !isValid}\r\n                      >\r\n                        SIGN IN\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"my-2 d-flex justify-content-between align-items-center\">\r\n                      <div className=\"form-check\">\r\n                        <label className=\"form-check-label text-muted\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            className=\"form-check-input\"\r\n                            name=\"terms\"\r\n                            {...register(\"terms\")}\r\n                          />\r\n                          <i className=\"input-helper\"></i>\r\n                          Keep me signed in\r\n                        </label>\r\n                      </div>\r\n                      <Link\r\n                        to=\"/user-pages/forgot-password-1\"\r\n                        className=\"auth-link text-black\"\r\n                      >\r\n                        Forgot password?\r\n                      </Link>\r\n                    </div>\r\n                  </Form>\r\n                </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}