{"version":3,"sources":["app/Admin-components/Revenues/RevenueAdd.js"],"names":["RevenueAdd","history","useHistory","useCookies","cookies","useState","branchList","setbranchList","IboList","setIboList","Users","setUsers","productList","setproductList","phone","setPhone","useForm","mode","register","handleSubmit","formState","errors","isDirty","isValid","useEffect","getAllProducts","getIBOList","getBrancheList","getUserList","getUsers","allUsers","data","results","getProductsList","allProducts","getIBOs","allIBOs","getBranches","allBranches","onSubmit","formData","JSON","stringify","branch","ibo","contactno","user","commissionBranch","commissionIbo","netProfit","Product","totalRevenue","CreateRevenue","toast","success","push","console","info","response","message","error","process","className","aria-label","href","onClick","event","preventDefault","role","aria-current","Group","id","name","required","value","map","item","index","key","label","inputExtraProps","autoFocus","country","onChange","Control","type"],"mappings":"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","file":"static/js/88.42fa5596.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Form } from \"react-bootstrap\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CreateRevenue, getBranches, getIBOs, getProductsList, getUsers } from \"../../../utils/APIs\";\r\nimport PhoneInput from \"react-phone-input-2\";\r\nimport 'react-phone-input-2/lib/style.css'\r\n\r\nconst RevenueAdd = () => {\r\n  const history = useHistory();\r\n  const [cookies] = useCookies([\"user\"]);\r\n  const [branchList, setbranchList] = useState([]);\r\n  const [IboList, setIboList] = useState([]);\r\n  const [Users, setUsers] = useState([]);\r\n  const [productList, setproductList] = useState([]);\r\n  const [phone, setPhone] = useState('+91');\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors, isDirty, isValid },\r\n  } = useForm({\r\n    mode: \"onChange\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    getAllProducts();\r\n    getIBOList();\r\n    getBrancheList();\r\n    getUserList();\r\n  }, []);\r\n\r\n  const getUserList = async () => {\r\n    const allUsers = await getUsers(3000);\r\n    setUsers(allUsers?.data?.results);\r\n  };\r\n\r\n  const handleOnChange = value => {\r\n    setPhone(value);\r\n  }\r\n\r\n  const getAllProducts = async () => {\r\n    const allProducts = await getProductsList(3000);\r\n    setproductList(allProducts?.data?.results);\r\n  };\r\n\r\n  const getIBOList = async () => {\r\n    const allIBOs = await getIBOs(5000);\r\n    setIboList(allIBOs?.data?.results);\r\n  };\r\n\r\n  const getBrancheList = async () => {\r\n    const allBranches = await getBranches(5000);\r\n    setbranchList(allBranches?.data?.results);\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    const formData = JSON.stringify({\r\n      'branch': data?.branch,\r\n      'IBO': data?.ibo,\r\n      'contactno': data?.contactno,\r\n      'user': data?.user,\r\n      'commision_branch': data?.commissionBranch,\r\n      'commision_ibo': data?.commissionIbo,\r\n      'net_revenue': data?.netProfit,\r\n      'product': data?.Product,\r\n      'total_revenue': data?.totalRevenue,\r\n    })\r\n\r\n    try {\r\n      const result = await CreateRevenue(formData)\r\n      toast.success(\"Revenue created successfully\");\r\n      history.push(\"/revenue/revenuelist\");\r\n    } catch (error) {\r\n      console.info(\"error \", error)\r\n      if (\r\n        error &&\r\n        error.response &&\r\n        error.response.data &&\r\n        error.response.data.message\r\n      ) {\r\n        toast.error(error.response.data.message);\r\n      } else {\r\n        toast.error(process.env.REACT_APP_ERROR_MESSAGE);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"page-header\">\r\n        <h3 className=\"page-title\">Clients / Create Revenue </h3>\r\n        <nav aria-label=\"breadcrumb\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\">\r\n              <a href=\"!#\" onClick={(event) => event.preventDefault()}>\r\n                {cookies?.user?.role} Dashboard\r\n              </a>\r\n            </li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">\r\n              Create Revenue\r\n            </li>\r\n          </ol>\r\n        </nav>\r\n      </div>\r\n      <div className=\"row auth\">\r\n        <div className=\"col-12 grid-margin\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <form className=\"form-sample\" onSubmit={handleSubmit(onSubmit)}>\r\n                <p className=\"card-description\"> Add Revenue </p>\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-4\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-4 col-form-label\">\r\n                        Product{\" \"}\r\n                      </label>\r\n                      <div className=\"col-sm-8\">\r\n                        <select\r\n                          className=\"form-control form-control-lg\"\r\n                          id=\"exampleFormControlSelect2\"\r\n                          name=\"Product\"\r\n                          {...register(\"Product\", {\r\n                            required: true,\r\n                          })}\r\n                        >\r\n                          <option value=''>--Select Product--</option>\r\n                          {productList?.map((item, index) => (\r\n                            <option\r\n                              key={index}\r\n                              value={item?.id}\r\n                              label={item?.name}\r\n                            ></option>\r\n                          ))}\r\n                        </select>\r\n                        {errors && errors.Product && (\r\n                          <p>Selecting a product is required field</p>\r\n                        )}\r\n                      </div>\r\n                    </Form.Group>\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-3 col-form-label\">Branch</label>\r\n                      <div className=\"col-sm-9\">\r\n                        <select\r\n                          className=\"form-control form-control-lg\"\r\n                          id=\"exampleFormControlSelect2\"\r\n                          name=\"branch\"\r\n                          {...register(\"branch\", {\r\n                            required: true,\r\n                          })}\r\n                        >\r\n                          <option value=''>--Select branch--</option>\r\n                          {branchList.map((item, index) => (\r\n                            <option key={index} value={item?.name} label={item?.name}></option>\r\n                          ))}\r\n                        </select>\r\n                        {errors && errors.branch && (\r\n                          <p>Selecting a branch is required field</p>\r\n                        )}\r\n                      </div>\r\n                    </Form.Group>\r\n                  </div>\r\n                  <div className=\"col-md-4\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-3 col-form-label\">IBO</label>\r\n                      <div className=\"col-sm-9\">\r\n                        <select\r\n                          className=\"form-control form-control-lg\"\r\n                          id=\"exampleFormControlSelect2\"\r\n                          name=\"ibo\"\r\n                          {...register(\"ibo\", {\r\n                            required: true,\r\n                          })}\r\n                        >\r\n                          <option value=''>--Select ibo--</option>\r\n                          {IboList.map((item, index) => (\r\n                            <option key={index} value={item?.name} label={item?.name}></option>\r\n                          ))}\r\n                        </select>\r\n                        {errors && errors.ibo && (\r\n                          <p>Selecting a IBO is required field</p>\r\n                        )}\r\n                      </div>\r\n                    </Form.Group>\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-3 col-form-label\">\r\n                        Select Users\r\n                      </label>\r\n                      <div className=\"col-sm-9\">\r\n                        <select\r\n                          className=\"form-control form-control-lg\"\r\n                          id=\"exampleFormControlSelect2\"\r\n                          name=\"user\"\r\n                          {...register(\"user\", {\r\n                            required: true,\r\n                          })}\r\n                        >\r\n                          {\r\n                            Users?.map((item, index) => (\r\n                              <option\r\n                                key={index}\r\n                                value={item?.id}\r\n                                label={item?.name}\r\n                              ></option>\r\n                            ))}\r\n                        </select>\r\n                        {errors && errors.user && (\r\n                          <p>Slecting a user is required field</p>\r\n                        )}\r\n                      </div>\r\n                    </Form.Group>\r\n                  </div>\r\n                  <div className=\"col-md-6\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-3 col-form-label\">\r\n                        Contact No\r\n                      </label>\r\n                      <div className=\"col-sm-9 contact_no\">\r\n                        <PhoneInput\r\n                          inputExtraProps={{\r\n                            name: \"contactno\",\r\n                            required: true,\r\n                            autoFocus: true\r\n                          }}\r\n                          country={\"US\"}\r\n                          value={phone}\r\n                          onChange={handleOnChange}\r\n                        />\r\n                      </div>\r\n                    </Form.Group>\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-4 col-form-label\">\r\n                        Net Profit\r\n                      </label>\r\n                      <div className=\"col-sm-8\">\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          name=\"netProfit\"\r\n                          {...register(\"netProfit\", { required: true })}\r\n                        />\r\n                        {errors && errors.netProfit && (\r\n                          <p>Net Profit is required field</p>\r\n                        )}\r\n                      </div>\r\n                    </Form.Group>\r\n                  </div>\r\n                  <div className=\"col-md-6\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-3 col-form-label\">\r\n                        Total Revenue\r\n                      </label>\r\n                      <div className=\"col-sm-9\">\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          name=\"totalRevenue\"\r\n                          {...register(\"totalRevenue\", { required: true })}\r\n                        />\r\n                        {errors &&\r\n                          errors.totalRevenue &&\r\n                          errors.totalRevenue.type === \"required\" && (\r\n                            <p>Total Revenue is required field</p>\r\n                          )}\r\n                      </div>\r\n                    </Form.Group>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-4 col-form-label\">Commision To Branch</label>\r\n                      <div className=\"col-sm-8\">\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          name=\"commissionBranch\"\r\n                          {...register(\"commissionBranch\", { required: true })}\r\n                        />\r\n                        {errors && errors.commissionBranch && (\r\n                          <p>Commission To Branch is required field</p>\r\n                        )}\r\n                      </div>\r\n\r\n                    </Form.Group>\r\n                  </div>\r\n                  <div className=\"col-md-6\">\r\n                    <Form.Group className=\"row\">\r\n                      <label className=\"col-sm-4 col-form-label\">Commision To IBO</label>\r\n                      <div className=\"col-sm-8\">\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          name=\"commissionIbo\"\r\n                          {...register(\"commissionIbo\", { required: true })}\r\n                        />\r\n                        {errors && errors.commissionIbo && (\r\n                          <p>Commission To Ibo is required field</p>\r\n                        )}\r\n                      </div>\r\n                    </Form.Group>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-3\">\r\n                  <button\r\n                    className=\"btn  btn-primary btn-lg font-weight-medium auth-form-btn\"\r\n                    type=\"submit\"\r\n                  >\r\n                    SUBMIT\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RevenueAdd;\r\n"],"sourceRoot":""}