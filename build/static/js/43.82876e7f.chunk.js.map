{"version":3,"sources":["utils/Functions/useUrl.js","utils/Functions/useDebounce.js","app/Admin-components/Employee-Management/Payroll.js"],"names":["useUrl","param","history","useHistory","useLocation","search","pathname","url","URLSearchParams","urlParam","get","useState","value","setValue","val","set","replace","toString","useDebounce","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","Payroll","searchTerm","debouncedSearchTerm","setPageCount","itemOffset","itemsPerPage","useCookies","cookies","setCookie","itemlist","setitemlist","setbranchlist","isLoading","setIsLoading","list","getBranchesClient","data","branch","results","getLeads","items","totalPages","response","message","toast","error","process","code","formData","JSON","stringify","refreshToken","localStorage","getItem","path","userLogout","finally","push","className","aria-label","href","onClick","event","preventDefault","user","role","aria-current","Fragment","map","item","index","key","name","title","to"],"mappings":"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","file":"static/js/43.82876e7f.chunk.js","sourcesContent":["import { useState } from 'react'\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nexport const useUrl = (param) => {\n\n    const history = useHistory()\n    const { search, pathname } = useLocation()\n    const url = new URLSearchParams(search)\n\n    const urlParam = url.get(param)\n    const [value, setValue] = useState(urlParam !== null ? urlParam : '')\n\n    function _setValue(val){\n        url.set(param, val)\n        history.replace({ pathname, search: url.toString() }); \n        setValue(val)\n    }\n\n    return [value, _setValue]\n}","import { useEffect, useState } from \"react\";\n\n// Hook\nexport const useDebounce = (value, delay) => {\n    // State and setters for debounced value\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(\n      () => {\n        // Update debounced value after delay\n        const handler = setTimeout(() => {\n          setDebouncedValue(value);\n        }, delay);\n        // Cancel the timeout if value changes (also on delay change or unmount)\n        // This is how we prevent debounced value from updating if value is changed ...\n        // .. within the delay period. Timeout gets cleared and restarted.\n        return () => {\n          clearTimeout(handler);\n        };\n      },\n      [value, delay] // Only re-call effect if value or delay changes\n    );\n    return debouncedValue;\n  }","import React, { useEffect, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { getLeads, getBranchesClient, deleteLead, userLogout, getBranches } from \"../../../utils/APIs\";\nimport { useDebounce } from \"../../../utils/Functions/useDebounce\";\nimport Spinner from \"../../shared/Spinner\";\nimport { useUrl } from \"../../../utils/Functions/useUrl\";\nimport { toast } from \"react-toastify\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst Payroll = () => {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const debouncedSearchTerm = useDebounce(searchTerm, 500);\n\n  const [pageCount, setPageCount] = useState(0);\n  const [itemOffset, setItemOffset] = useUrl(\"page\");\n  const [itemsPerPage] = useState(20);\n\n  const [cookies, setCookie] = useCookies([\"user\"]);\n  const [itemlist, setitemlist] = useState([]);\n  const [branchlist, setbranchlist] = useState([]);\n  const [isLoading, setIsLoading] = useState(true)\n  const history = useHistory()\n\n  useEffect(() => {\n    list();\n  }, [itemOffset, itemsPerPage, debouncedSearchTerm]);\n\n  const list = async () => {\n    setIsLoading(true)\n    try {\n      const branch = await (await getBranchesClient()).data;\n      setbranchlist(branch?.results);\n      const items = await (\n        await getLeads(\n          itemsPerPage,\n          +itemOffset + 1,\n          searchTerm\n        )\n      ).data;\n      setitemlist(items?.results);\n      setPageCount(items?.totalPages);\n      setIsLoading(false)\n    } catch (error) {\n      if (error?.response?.data?.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error(process.env.REACT_APP_ERROR_MESSAGE);\n      }\n\n      if (error?.response?.data?.code === 401) {\n        const formData = JSON.stringify({\n          refreshToken: localStorage.getItem(\"refreshToken\"),\n        });\n        setCookie(\"user\", null, { path: \"/\" });\n        userLogout(formData).finally(() => {\n          history.push(\"/user-pages/login-1\");\n        });\n      }\n    }\n  }\n  const handlePageClick = (event) => {\n    setItemOffset(event.selected);\n  };\n\n  return (\n    <div>\n      <div className=\"page-header\">\n        <h3 className=\"page-title\">Employee / Show Payroll </h3>\n        <nav aria-label=\"breadcrumb\">\n          <ol className=\"breadcrumb\">\n            <li className=\"breadcrumb-item\">\n              <a href=\"!#\" onClick={(event) => event.preventDefault()}>\n                {cookies?.user?.role} Dashboard\n              </a>\n            </li>\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">\n              Show Payroll\n            </li>\n          </ol>\n        </nav>\n      </div>\n      <div className=\"col-lg-12 grid-margin stretch-card p0\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <div className=\"row mb-3\">\n              <div className=\"col-md-12\">\n                <h4 className=\"card-title\">Payroll list</h4>\n              </div>\n            </div>\n            <div className=\"table-responsive\">\n              <table className=\"table table-striped\">\n                <thead>\n                  <tr>\n                    <th> Month </th>\n                    <th> Total Amount </th>\n                    <th> Status </th>\n                    <th> </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {\n                    isLoading ? <React.Fragment><Spinner /></React.Fragment>\n                      :\n                      itemlist?.map((item, index) => {\n                        return (\n                          <tr key={index}>\n                            <td>{item?.name}</td>\n                            <td>{item?.title}</td>\n                            <td>Active</td>\n                            <td><Link to='/employee_manage/run-payroll'><button className=\"btn btn-sm btn-gradient-primary\">Run Payroll</button></Link></td>\n                          </tr>\n                        );\n                      })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Payroll\n\n\n\n\n"],"sourceRoot":""}